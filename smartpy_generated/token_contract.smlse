(storage (record 6 (administrator (literal (address "tz1h3rQ8wBxFd8L9B3d7Jhaawu6Z568XU3xY") -1)) (balances (type_annotation (big_map 6 ) (bigmap (unknown 1) (record ((approvals (map "address" "nat")) (balance "nat")) None)) 6)) (counter (literal (intOrNat 0) 6)) (default_expiry (literal (intOrNat 360) 6)) (metadata (big_map 9 ((literal (string "") -1) (literal (bytes "0x74657a6f732d73746f726167653a6d642d6a736f6e") 9)) ((literal (string "md-json") -1) (literal (bytes "0x7b7d") 9)))) (paused (literal (bool False) 6)) (permit_expiries (type_annotation (big_map 8 ) (bigmap (tuple "address" "bytes") (option "nat")) 8)) (permits (type_annotation (big_map 7 ) (bigmap (tuple "address" "bytes") "timestamp") 7)) (totalSupply (literal (intOrNat 0) 6)) (user_expiries (type_annotation (big_map 7 ) (bigmap "address" (option "nat")) 7)))
storage_type (())
messages ((approve True ((set_type (params 115) (record ((spender "address") (value "nat")) (Some (("spender") ("value")))) 116) (verify (invert (attr (data) "paused" 117) 117) False 117) (verify (or (eq (getItemDefault (attr (getItem (attr (data) "balances" 118) (sender) 118) "approvals" 118) (attr (params 115) "spender" 118) (literal (intOrNat 0) 118) 118) (literal (intOrNat 0) 119) 119) (eq (attr (params 115) "value" 119) (literal (intOrNat 0) 119) 119) 119) False (literal (string "UnsafeAllowanceChange") 119) 119) (set (getItem (attr (getItem (attr (data) "balances" 118) (sender) 120) "approvals" 120) (attr (params 115) "spender" 118) 120) (attr (params 115) "value" 119) 120))) (burn True ((set_type (params 143) (record ((address "address") (value "nat")) None) 144) (verify (eq (sender) (attr (data) "administrator" 145) 145) False 145) (verify (ge (attr (getItem (attr (data) "balances" 118) (attr (params 143) "address" 146) 146) "balance" 146) (attr (params 143) "value" 146) 146) False 146) (set (attr (getItem (attr (data) "balances" 118) (attr (params 143) "address" 146) 147) "balance" 147) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 118) (attr (params 143) "address" 146) 147) "balance" 147) (attr (params 143) "value" 146) 147) 147) "Some" "None" 147) 147) (set (attr (data) "totalSupply" 148) (openVariant (isNat (sub (attr (data) "totalSupply" 148) (attr (params 143) "value" 146) 148) 148) "Some" "None" 148) 148))) (getAdministrator True ((set (operations 168) (cons (transfer (attr (data) "administrator" 145) (literal (mutez 0) 168) (openVariant (contract "" "address" (attr (params 167) "target" 168) 168) "Some" "None" 168) 168) (operations 168) 168) 168))) (getAllowance True ((set (operations 160) (cons (transfer (getItem (attr (getItem (attr (data) "balances" 118) (attr (attr (params 159) "arg" 160) "owner" 160) 160) "approvals" 160) (attr (attr (params 159) "arg" 160) "spender" 160) 160) (literal (mutez 0) 160) (openVariant (contract "" "nat" (attr (params 159) "target" 160) 160) "Some" "None" 160) 160) (operations 160) 160) 160))) (getBalance True ((set (operations 156) (cons (transfer (attr (getItem (attr (data) "balances" 118) (attr (attr (params 155) "arg" 156) "owner" 156) 156) "balance" 156) (literal (mutez 0) 156) (openVariant (contract "" "nat" (attr (params 155) "target" 156) 156) "Some" "None" 156) 156) (operations 156) 156) 156))) (getCounter True ((set (operations 172) (cons (transfer (attr (data) "counter" 172) (literal (mutez 0) 172) (openVariant (contract "" "nat" (attr (params 171) "target" 172) 172) "Some" "None" 172) 172) (operations 172) 172) 172))) (getDefaultExpiry True ((set (operations 176) (cons (transfer (attr (data) "default_expiry" 60) (literal (mutez 0) 176) (openVariant (contract "" "nat" (attr (params 175) "target" 176) 176) "Some" "None" 176) 176) (operations 176) 176) 176))) (getTotalSupply True ((set (operations 164) (cons (transfer (attr (data) "totalSupply" 148) (literal (mutez 0) 164) (openVariant (contract "" "nat" (attr (params 163) "target" 164) 164) "Some" "None" 164) 164) (operations 164) 164) 164))) (mint True ((set_type (params 135) (record ((address "address") (value "nat")) None) 136) (verify (eq (sender) (attr (data) "administrator" 145) 137) False 137) (ifBlock (invert (contains (attr (data) "balances" 118) (attr (params 135) "address" 138) 151) 151) ((set (getItem (attr (data) "balances" 118) (attr (params 135) "address" 138) 152) (record 152 (approvals (map 152 )) (balance (literal (intOrNat 0) 152))) 152)) 151) (set (attr (getItem (attr (data) "balances" 118) (attr (params 135) "address" 138) 139) "balance" 139) (add (attr (getItem (attr (data) "balances" 118) (attr (params 135) "address" 138) 139) "balance" 139) (attr (params 135) "value" 139) 139) 139) (set (attr (data) "totalSupply" 148) (add (attr (data) "totalSupply" 148) (attr (params 135) "value" 139) 140) 140))) (permit True ((set_type (params 74) (list (tuple "key" (tuple "signature" "bytes"))) 75) (verify (invert (attr (data) "paused" 117) 76) False 76) (defineLocal "params_hash" (literal (bytes "0x0000") 78) 78) (defineLocal "unsigned" (literal (bytes "0x0000") 79) 79) (defineLocal "pk_address" (to_address (self) "None") 80) (forGroup "permit" (params 74) ((set (getLocal "params_hash" -1) (second (second (iter "permit" 81) 82) 82) 82) (set (getLocal "unsigned" -1) (pack (tuple 83 (tuple 83 (chain_id) (to_address (self) "None")) (tuple 83 (attr (data) "counter" 172) (getLocal "params_hash" 83))) 83) 83) (set (getLocal "pk_address" -1) (to_address (implicit_account (hash_key (first (iter "permit" 81) 84) 84) 84) 84) 84) (verify (invert (contains (attr (data) "permits" 51) (tuple 85 (getLocal "pk_address" 85) (getLocal "params_hash" 85)) 85) 85) False (tuple 85 (literal (string "DUP_PERMIT") -1) (getLocal "params_hash" 85)) 85) (verify (check_signature (first (iter "permit" 81) 86) (first (second (iter "permit" 81) 86) 86) (getLocal "unsigned" 86) 86) False (tuple 86 (literal (string "MISSIGNED") -1) (getLocal "unsigned" 86)) 86) (set (getItem (attr (data) "permits" 51) (tuple 87 (getLocal "pk_address" 87) (getLocal "params_hash" 87)) 87) (now) 87) (set (attr (data) "counter" 172) (add (attr (data) "counter" 172) (literal (intOrNat 1) 88) 88) 88)) 81))) (setAdministrator True ((set_type (params 129) "address" 130) (verify (eq (sender) (attr (data) "administrator" 145) 131) False 131) (set (attr (data) "administrator" 145) (params 129) 132))) (setExpiry True ((set_type (params 91) (record ((address "address") (permit (option "bytes")) (seconds "nat")) None) 92) (verify (eq (pack (type_annotation (attr (params 91) "address" 93) (unknown 9) 93) 93) (pack (type_annotation (sender) (unknown 9) 93) 93) 93) "NOT_AUTHORIZED" (literal (bool False) 93) 93) (ifBlock (isVariant (attr (params 91) "permit" 94) "Some" 94) ((verify (contains (attr (data) "permits" 51) (tuple 96 (attr (params 91) "address" 93) (openVariant (attr (params 91) "permit" 94) "Some" "None" 95)) 96) False (literal (string "PERMIT_NONEXISTENT") 96) 96) (ifBlock (and (contains (attr (data) "permit_expiries" 54) (tuple 98 (attr (params 91) "address" 93) (openVariant (attr (params 91) "permit" 94) "Some" "None" 95)) 98) (isVariant (getItem (attr (data) "permit_expiries" 54) (tuple 98 (attr (params 91) "address" 93) (openVariant (attr (params 91) "permit" 94) "Some" "None" 95)) 98) "Some" 98) 98) ((verify (gt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 51) (tuple 97 (attr (params 91) "address" 93) (openVariant (attr (params 91) "permit" 94) "Some" "None" 95)) 97) 100) 100) "Some" "None" 100) (openVariant (getItem (attr (data) "permit_expiries" 54) (tuple 99 (attr (params 91) "address" 93) (openVariant (attr (params 91) "permit" 94) "Some" "None" 95)) 99) "Some" "None" 99) 100) False (literal (string "PERMIT_REVOKED") 100) 100) (set (getItem (attr (data) "permit_expiries" 54) (tuple 101 (attr (params 91) "address" 93) (openVariant (attr (params 91) "permit" 94) "Some" "None" 95)) 101) (variant "Some" (attr (params 91) "seconds" 101) 101) 101)) 98) (elseBlock ((ifBlock (and (contains (attr (data) "user_expiries" 57) (attr (params 91) "address" 93) 103) (isVariant (getItem (attr (data) "user_expiries" 57) (attr (params 91) "address" 93) 103) "Some" 103) 103) ((verify (gt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 51) (tuple 97 (attr (params 91) "address" 93) (openVariant (attr (params 91) "permit" 94) "Some" "None" 95)) 97) 105) 105) "Some" "None" 105) (openVariant (getItem (attr (data) "user_expiries" 57) (attr (params 91) "address" 93) 104) "Some" "None" 104) 105) False (literal (string "PERMIT_REVOKED") 105) 105) (set (getItem (attr (data) "permit_expiries" 54) (tuple 106 (attr (params 91) "address" 93) (openVariant (attr (params 91) "permit" 94) "Some" "None" 95)) 106) (variant "Some" (attr (params 91) "seconds" 101) 106) 106)) 103) (elseBlock ((verify (gt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 51) (tuple 97 (attr (params 91) "address" 93) (openVariant (attr (params 91) "permit" 94) "Some" "None" 95)) 97) 108) 108) "Some" "None" 108) (attr (data) "default_expiry" 60) 108) False (literal (string "PERMIT_REVOKED") 108) 108) (set (getItem (attr (data) "permit_expiries" 54) (tuple 109 (attr (params 91) "address" 93) (openVariant (attr (params 91) "permit" 94) "Some" "None" 95)) 109) (variant "Some" (attr (params 91) "seconds" 101) 109) 109)))))) 94) (elseBlock ((set (getItem (attr (data) "user_expiries" 57) (attr (params 91) "address" 93) 112) (variant "Some" (attr (params 91) "seconds" 101) 112) 112))))) (setPause True ((set_type (params 123) "bool" 124) (verify (eq (sender) (attr (data) "administrator" 145) 125) False 125) (set (attr (data) "paused" 117) (params 123) 126))) (transfer True ((set_type (params 12) (record ((from_ "address") (to_ "address") (value "nat")) None) 13) (defineLocal "sender" (sender) 14) (defineLocal "y2" (call_lambda (global "transfer_presigned" -1) (record 15 (in_param (params 12)) (in_storage (data))) 15) 15) (set (data) (attr (getLocal "y2" 15) "storage" 15) 15) (forGroup "op" (attr (getLocal "y2" 15) "operations" 15) ((set (operations 15) (cons (iter "op" 15) (operations 15) 15) 15)) 15) (ifBlock (attr (getLocal "y2" 15) "result" 15) ((set (getLocal "sender" -1) (attr (params 12) "from_" 17) 17)) 15) (verify (or (eq (getLocal "sender" 18) (attr (data) "administrator" 145) 18) (and (invert (attr (data) "paused" 117) 19) (or (eq (attr (params 12) "from_" 17) (getLocal "sender" 20) 20) (ge (getItem (attr (getItem (attr (data) "balances" 118) (attr (params 12) "from_" 17) 21) "approvals" 21) (getLocal "sender" 21) 21) (attr (params 12) "value" 21) 21) 20) 19) 18) False 18) (ifBlock (invert (contains (attr (data) "balances" 118) (attr (params 12) "to_" 22) 151) 151) ((set (getItem (attr (data) "balances" 118) (attr (params 12) "to_" 22) 152) (record 152 (approvals (map 152 )) (balance (literal (intOrNat 0) 152))) 152)) 151) (verify (ge (attr (getItem (attr (data) "balances" 118) (attr (params 12) "from_" 17) 23) "balance" 23) (attr (params 12) "value" 21) 23) False 23) (set (attr (getItem (attr (data) "balances" 118) (attr (params 12) "from_" 17) 24) "balance" 24) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 118) (attr (params 12) "from_" 17) 24) "balance" 24) (attr (params 12) "value" 21) 24) 24) "Some" "None" 24) 24) (set (attr (getItem (attr (data) "balances" 118) (attr (params 12) "to_" 22) 25) "balance" 25) (add (attr (getItem (attr (data) "balances" 118) (attr (params 12) "to_" 22) 25) "balance" 25) (attr (params 12) "value" 21) 25) 25) (ifBlock (and (neq (attr (params 12) "from_" 17) (getLocal "sender" 26) 26) (neq (attr (data) "administrator" 145) (getLocal "sender" 26) 26) 26) ((set (getItem (attr (getItem (attr (data) "balances" 118) (attr (params 12) "from_" 17) 27) "approvals" 27) (getLocal "sender" 27) 27) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) "balances" 118) (attr (params 12) "from_" 17) 27) "approvals" 27) (getLocal "sender" 27) 27) (attr (params 12) "value" 21) 27) 27) "Some" "None" 27) 27)) 26))))
flags ()
globals ((transfer_presigned (lambda 0 "" -1 ((defineLocal "__operations__" (type_annotation (list -1 ) (list "operation") -1) -1) (defineLocal "__storage__" (type_annotation (attr (lambdaParams 0 "" -1 (unknown 2)) "in_storage" -1) (unknown 3) -1) -1) (seq "__s1" ((set_type (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) (record ((from_ "address") (to_ "address") (value "nat")) None) 47) (ifBlock (contains (attr (data) "permits" 51) (tuple 50 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 51) ((defineLocal "effective_expiry" (literal (intOrNat 0) 53) 53) (ifBlock (and (contains (attr (data) "permit_expiries" 54) (tuple 50 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 54) (isVariant (getItem (attr (data) "permit_expiries" 54) (tuple 50 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 54) "Some" 54) 54) ((set (getLocal "effective_expiry" -1) (openVariant (getItem (attr (data) "permit_expiries" 54) (tuple 50 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 55) "Some" "None" 55) 55)) 54) (elseBlock ((ifBlock (and (contains (attr (data) "user_expiries" 57) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) 57) (isVariant (getItem (attr (data) "user_expiries" 57) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) 57) "Some" 57) 57) ((set (getLocal "effective_expiry" -1) (openVariant (getItem (attr (data) "user_expiries" 57) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) 58) "Some" "None" 58) 58)) 57) (elseBlock ((set (getLocal "effective_expiry" -1) (attr (data) "default_expiry" 60) 60))))) (ifBlock (ge (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 51) (tuple 50 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 52) 63) 63) "Some" "None" 63) (getLocal "effective_expiry" 63) 63) ((delItem (attr (data) "permits" 51) (tuple 65 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 65) (result (literal (bool False) 66) 66)) 63) (elseBlock ((delItem (attr (data) "permits" 51) (tuple 68 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 68) (result (literal (bool True) 69) 69)))) 51) (elseBlock ((result (literal (bool False) 71) 71)))) -1) (bind "__s1" ((result (record -1 (operations (getLocal "__operations__" -1)) (result (getLocal "__s1" -1)) (storage (getLocal "__storage__" -1))) -1)) -1)))))
entry_points_layout ()
balance ())
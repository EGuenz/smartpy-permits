(storage (record 6 (administrator (literal (address "tz1h3rQ8wBxFd8L9B3d7Jhaawu6Z568XU3xY") -1)) (balances (type_annotation (big_map 6 ) (bigmap (unknown 1) (record ((approvals (map "address" "nat")) (balance "nat")) None)) 6)) (counter (literal (intOrNat 0) 6)) (default_expiry (literal (intOrNat 360) 6)) (paused (literal (bool False) 6)) (permit_expiries (type_annotation (big_map 8 ) (bigmap (tuple "address" "bytes") (option "nat")) 8)) (permits (type_annotation (big_map 7 ) (bigmap (tuple "address" "bytes") "timestamp") 7)) (totalSupply (literal (intOrNat 0) 6)) (user_expiries (type_annotation (big_map 7 ) (bigmap "address" (option "nat")) 7)))
storage_type (())
messages ((add_permits True ((set_type (params 45) (list (tuple "key" (tuple "signature" "bytes"))) 46) (defineLocal "pk_address" (to_address (self) "None") 48) (forGroup "permit" (params 45) ((set (getLocal "pk_address" -1) (to_address (implicit_account (hash_key (first (iter "permit" 49) 50) 50) 50) 50) 50) (ifBlock (contains (attr (data) "permits" 51) (tuple 51 (getLocal "pk_address" 51) (second (second (iter "permit" 49) 51) 51)) 51) ((failwith (literal (string "DUP_PERMIT") 52) 52)) 51) (ifBlock (check_signature (first (iter "permit" 49) 53) (first (second (iter "permit" 49) 53) 53) (second (second (iter "permit" 49) 53) 53) 53) ((set (getItem (attr (data) "permits" 51) (tuple 54 (getLocal "pk_address" 54) (second (second (iter "permit" 49) 54) 54)) 54) (now) 54) (set (attr (data) "counter" 55) (add (attr (data) "counter" 55) (literal (intOrNat 1) 55) 55) 55)) 53) (elseBlock ((failwith (tuple 57 (literal (string "MISSIGNED") -1) (second (second (iter "permit" 49) 57) 57)) 57)))) 49))) (approve True ((set_type (params 60) (record ((spender "address") (value "nat")) (Some (("spender") ("value")))) 61) (verify (invert (attr (data) "paused" 13) 62) False 62) (verify (or (eq (getItemDefault (attr (getItem (attr (data) "balances" 15) (sender) 63) "approvals" 63) (attr (params 60) "spender" 63) (literal (intOrNat 0) 63) 63) (literal (intOrNat 0) 64) 64) (eq (attr (params 60) "value" 64) (literal (intOrNat 0) 64) 64) 64) False (literal (string "UnsafeAllowanceChange") 64) 64) (set (getItem (attr (getItem (attr (data) "balances" 15) (sender) 65) "approvals" 65) (attr (params 60) "spender" 63) 65) (attr (params 60) "value" 64) 65))) (burn True ((set_type (params 88) (record ((address "address") (value "nat")) None) 89) (verify (eq (sender) (attr (data) "administrator" 12) 90) False 90) (verify (ge (attr (getItem (attr (data) "balances" 15) (attr (params 88) "address" 91) 91) "balance" 91) (attr (params 88) "value" 91) 91) False 91) (set (attr (getItem (attr (data) "balances" 15) (attr (params 88) "address" 91) 92) "balance" 92) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 15) (attr (params 88) "address" 91) 92) "balance" 92) (attr (params 88) "value" 91) 92) 92) "Some" "None" 92) 92) (set (attr (data) "totalSupply" 93) (openVariant (isNat (sub (attr (data) "totalSupply" 93) (attr (params 88) "value" 91) 93) 93) "Some" "None" 93) 93))) (getAdministrator True ((set (operations 113) (cons (transfer (attr (data) "administrator" 12) (literal (mutez 0) 113) (openVariant (contract "" "address" (attr (params 112) "target" 113) 113) "Some" "None" 113) 113) (operations 113) 113) 113))) (getAllowance True ((set (operations 105) (cons (transfer (getItem (attr (getItem (attr (data) "balances" 15) (attr (attr (params 104) "arg" 105) "owner" 105) 105) "approvals" 105) (attr (attr (params 104) "arg" 105) "spender" 105) 105) (literal (mutez 0) 105) (openVariant (contract "" "nat" (attr (params 104) "target" 105) 105) "Some" "None" 105) 105) (operations 105) 105) 105))) (getBalance True ((set (operations 101) (cons (transfer (attr (getItem (attr (data) "balances" 15) (attr (attr (params 100) "arg" 101) "owner" 101) 101) "balance" 101) (literal (mutez 0) 101) (openVariant (contract "" "nat" (attr (params 100) "target" 101) 101) "Some" "None" 101) 101) (operations 101) 101) 101))) (getTotalSupply True ((set (operations 109) (cons (transfer (attr (data) "totalSupply" 93) (literal (mutez 0) 109) (openVariant (contract "" "nat" (attr (params 108) "target" 109) 109) "Some" "None" 109) 109) (operations 109) 109) 109))) (mint True ((set_type (params 80) (record ((address "address") (value "nat")) None) 81) (verify (eq (sender) (attr (data) "administrator" 12) 82) False 82) (ifBlock (invert (contains (attr (data) "balances" 15) (attr (params 80) "address" 83) 96) 96) ((set (getItem (attr (data) "balances" 15) (attr (params 80) "address" 83) 97) (record 97 (approvals (map 97 )) (balance (literal (intOrNat 0) 97))) 97)) 96) (set (attr (getItem (attr (data) "balances" 15) (attr (params 80) "address" 83) 84) "balance" 84) (add (attr (getItem (attr (data) "balances" 15) (attr (params 80) "address" 83) 84) "balance" 84) (attr (params 80) "value" 84) 84) 84) (set (attr (data) "totalSupply" 93) (add (attr (data) "totalSupply" 93) (attr (params 80) "value" 84) 85) 85))) (setAdministrator True ((set_type (params 74) "address" 75) (verify (eq (sender) (attr (data) "administrator" 12) 76) False 76) (set (attr (data) "administrator" 12) (params 74) 77))) (setPause True ((set_type (params 68) "bool" 69) (verify (eq (sender) (attr (data) "administrator" 12) 70) False 70) (set (attr (data) "paused" 13) (params 68) 71))) (transfer True ((set_type (params 24) (record ((from_ "address") (to_ "address") (value "nat")) None) 25) (defineLocal "y2" (call_lambda (global "transfer_helper" -1) (record 27 (in_param (record 26 (from_ (attr (params 24) "from_" 26)) (sender_ (sender)) (to_ (attr (params 24) "to_" 26)) (value (attr (params 24) "value" 26)))) (in_storage (data))) 27) 27) (set (data) (attr (getLocal "y2" 27) "storage" 27) 27) (forGroup "op" (attr (getLocal "y2" 27) "operations" 27) ((set (operations 27) (cons (iter "op" 27) (operations 27) 27) 27)) 27))) (transfer_signed True ((set_type (params 30) (record ((from_ "address") (pk "key") (signed "signature") (to_ "address") (value "nat")) None) 31) (defineLocal "sender" (sender) 32) (ifBlock (neq (attr (params 30) "from_" 33) (getLocal "sender" 33) 33) ((verify (contains (attr (data) "permits" 51) (tuple 38 (to_address (implicit_account (hash_key (attr (params 30) "pk" 37) 37) 37) 37) (hashCrypto "BLAKE2B" (call_michelson (op "SELF; ADDRESS; CHAIN_ID; PAIR; PAIR; PACK" (tuple "nat" "bytes") "out" "bytes") 36 (tuple 36 (attr (data) "counter" 55) (hashCrypto "BLAKE2B" (concat (list 34 (pack (attr (params 30) "from_" 33) 34) (pack (attr (params 30) "to_" 34) 34) (pack (attr (params 30) "value" 34) 34)) 34) 35))) 36)) 38) False (tuple 39 (literal (string "NO_PERMIT") -1) (tuple 39 (to_address (implicit_account (hash_key (attr (params 30) "pk" 37) 37) 37) 37) (hashCrypto "BLAKE2B" (call_michelson (op "SELF; ADDRESS; CHAIN_ID; PAIR; PAIR; PACK" (tuple "nat" "bytes") "out" "bytes") 36 (tuple 36 (attr (data) "counter" 55) (hashCrypto "BLAKE2B" (concat (list 34 (pack (attr (params 30) "from_" 33) 34) (pack (attr (params 30) "to_" 34) 34) (pack (attr (params 30) "value" 34) 34)) 34) 35))) 36))) 38) (set (getLocal "sender" -1) (to_address (implicit_account (hash_key (attr (params 30) "pk" 37) 37) 37) 37) 41)) 33) (defineLocal "y3" (call_lambda (global "transfer_helper" -1) (record 42 (in_param (record 42 (from_ (attr (params 30) "from_" 33)) (sender_ (getLocal "sender" 42)) (to_ (attr (params 30) "to_" 34)) (value (attr (params 30) "value" 34)))) (in_storage (data))) 42) 42) (set (data) (attr (getLocal "y3" 42) "storage" 42) 42) (forGroup "op" (attr (getLocal "y3" 42) "operations" 42) ((set (operations 42) (cons (iter "op" 42) (operations 42) 42) 42)) 42))))
flags ()
globals ((transfer_helper (lambda 0 "" -1 ((defineLocal "__operations__" (type_annotation (list -1 ) (list "operation") -1) -1) (defineLocal "__storage__" (type_annotation (attr (lambdaParams 0 "" -1 (unknown 2)) "in_storage" -1) (unknown 3) -1) -1) (seq "__s1" ((verify (or (eq (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "sender_" 12) (attr (data) "administrator" 12) 12) (and (invert (attr (data) "paused" 13) 13) (or (eq (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 14) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "sender_" 12) 14) (ge (getItem (attr (getItem (attr (data) "balances" 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 14) 15) "approvals" 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "sender_" 12) 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "value" 15) 15) 14) 13) 12) False 12) (ifBlock (invert (contains (attr (data) "balances" 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "to_" 16) 96) 96) ((set (getItem (attr (data) "balances" 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "to_" 16) 97) (record 97 (approvals (map 97 )) (balance (literal (intOrNat 0) 97))) 97)) 96) (verify (ge (attr (getItem (attr (data) "balances" 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 14) 17) "balance" 17) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "value" 15) 17) False 17) (set (attr (getItem (attr (data) "balances" 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 14) 18) "balance" 18) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 14) 18) "balance" 18) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "value" 15) 18) 18) "Some" "None" 18) 18) (set (attr (getItem (attr (data) "balances" 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "to_" 16) 19) "balance" 19) (add (attr (getItem (attr (data) "balances" 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "to_" 16) 19) "balance" 19) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "value" 15) 19) 19) (ifBlock (and (neq (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 14) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "sender_" 12) 20) (neq (attr (data) "administrator" 12) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "sender_" 12) 20) 20) ((set (getItem (attr (getItem (attr (data) "balances" 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 14) 21) "approvals" 21) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "sender_" 12) 21) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) "balances" 15) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 14) 21) "approvals" 21) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "sender_" 12) 21) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "value" 15) 21) 21) "Some" "None" 21) 21)) 20)) -1) (bind "__s1" ((result (record -1 (operations (getLocal "__operations__" -1)) (result (getLocal "__s1" -1)) (storage (getLocal "__storage__" -1))) -1)) -1)))))
entry_points_layout ()
balance ())
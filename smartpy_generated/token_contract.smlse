(storage (record 7 (administrator (literal (address "tz1h3rQ8wBxFd8L9B3d7Jhaawu6Z568XU3xY") -1)) (balances (type_annotation (big_map 7 ) (bigmap (unknown 1) (record ((approvals (map "address" "nat")) (balance "nat")) None)) 7)) (counter (literal (intOrNat 0) 7)) (default_expiry (literal (intOrNat 360) 7)) (metadata (big_map 10 ((literal (string "") -1) (literal (bytes "0x74657a6f732d73746f726167653a6d642d6a736f6e") 10)) ((literal (string "md-json") -1) (literal (bytes "0x7b7d") 10)))) (paused (literal (bool False) 7)) (permit_expiries (type_annotation (big_map 9 ) (bigmap (tuple "address" "bytes") (option "nat")) 9)) (permits (type_annotation (big_map 8 ) (bigmap (tuple "address" "bytes") "timestamp") 8)) (totalSupply (literal (intOrNat 0) 7)) (user_expiries (type_annotation (big_map 8 ) (bigmap "address" (option "nat")) 8)))
storage_type (())
messages ((approve True ((set_type (params 154) (record ((spender "address") (value "nat")) (Some (("spender") ("value")))) 155) (verify (invert (attr (data) "paused" 157) 157) False 157) (verify (or (eq (getItemDefault (attr (getItem (attr (data) "balances" 158) (sender) 158) "approvals" 158) (attr (params 154) "spender" 159) (literal (intOrNat 0) 158) 158) (literal (intOrNat 0) 160) 160) (eq (attr (params 154) "value" 161) (literal (intOrNat 0) 161) 161) 160) False (literal (string "UnsafeAllowanceChange") 160) 160) (set (getItem (attr (getItem (attr (data) "balances" 158) (sender) 162) "approvals" 162) (attr (params 154) "spender" 159) 162) (attr (params 154) "value" 161) 162))) (burn True ((set_type (params 185) (record ((address "address") (value "nat")) None) 186) (verify (eq (sender) (attr (data) "administrator" 187) 187) False 187) (verify (ge (attr (getItem (attr (data) "balances" 158) (attr (params 185) "address" 188) 188) "balance" 188) (attr (params 185) "value" 188) 188) False 188) (set (attr (getItem (attr (data) "balances" 158) (attr (params 185) "address" 188) 189) "balance" 189) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 158) (attr (params 185) "address" 188) 190) "balance" 190) (attr (params 185) "value" 188) 190) 189) "Some" "None" 189) 189) (set (attr (data) "totalSupply" 191) (openVariant (isNat (sub (attr (data) "totalSupply" 191) (attr (params 185) "value" 188) 191) 191) "Some" "None" 191) 191))) (delete_permits True ((set_type (params 34) (list (tuple "address" "bytes")) 35) (defineLocal "effective_expiry" (literal (intOrNat 0) 36) 36) (forGroup "permit_key" (params 34) ((verify (contains (attr (data) "permits" 62) (iter "permit_key" 37) 38) False (tuple 39 (literal (string "NO_PERMIT_TO_DELETE") -1) (iter "permit_key" 37)) 39) (defineLocal "y3" (call_lambda (global "getEffectiveExpiry" -1) (record 41 (in_param (iter "permit_key" 37)) (in_storage (data))) 41) 41) (set (data) (attr (getLocal "y3" 41) "storage" 41) 41) (forGroup "op" (attr (getLocal "y3" 41) "operations" 41) ((set (operations 41) (cons (iter "op" 41) (operations 41) 41) 41)) 41) (verify (ge (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 62) (iter "permit_key" 37) 42) 43) 43) "Some" "None" 43) (attr (getLocal "y3" 41) "result" 41) 43) False (tuple 44 (literal (string "PERMIT_NOT_EXPIRED") -1) (iter "permit_key" 37)) 43) (set_type (iter "permit_key" 37) (tuple "address" "bytes") 48) (ifBlock (contains (attr (data) "permits" 62) (iter "permit_key" 37) 49) ((delItem (attr (data) "permits" 62) (iter "permit_key" 37) 50)) 49) (ifBlock (contains (attr (data) "permit_expiries" 111) (iter "permit_key" 37) 51) ((delItem (attr (data) "permit_expiries" 111) (iter "permit_key" 37) 52)) 51)) 37))) (getAdministrator True ((set (operations 214) (cons (transfer (attr (data) "administrator" 187) (literal (mutez 0) 214) (openVariant (contract "" "address" (attr (params 213) "target" 215) 215) "Some" "None" 215) 214) (operations 214) 214) 214))) (getAllowance True ((set (operations 204) (cons (transfer (getItem (attr (getItem (attr (data) "balances" 158) (attr (attr (params 203) "arg" 204) "owner" 204) 204) "approvals" 204) (attr (attr (params 203) "arg" 204) "spender" 204) 204) (literal (mutez 0) 204) (openVariant (contract "" "nat" (attr (params 203) "target" 205) 205) "Some" "None" 205) 204) (operations 204) 204) 204))) (getBalance True ((set (operations 199) (cons (transfer (attr (getItem (attr (data) "balances" 158) (attr (attr (params 198) "arg" 199) "owner" 199) 199) "balance" 199) (literal (mutez 0) 199) (openVariant (contract "" "nat" (attr (params 198) "target" 200) 200) "Some" "None" 200) 199) (operations 199) 199) 199))) (getCounter True ((set (operations 219) (cons (transfer (attr (data) "counter" 219) (literal (mutez 0) 219) (openVariant (contract "" "nat" (attr (params 218) "target" 220) 219) "Some" "None" 219) 219) (operations 219) 219) 219))) (getDefaultExpiry True ((set (operations 224) (cons (transfer (attr (data) "default_expiry" 119) (literal (mutez 0) 224) (openVariant (contract "" "nat" (attr (params 223) "target" 225) 225) "Some" "None" 225) 224) (operations 224) 224) 224))) (getTotalSupply True ((set (operations 209) (cons (transfer (attr (data) "totalSupply" 191) (literal (mutez 0) 209) (openVariant (contract "" "nat" (attr (params 208) "target" 210) 210) "Some" "None" 210) 209) (operations 209) 209) 209))) (mint True ((set_type (params 177) (record ((address "address") (value "nat")) None) 178) (verify (eq (sender) (attr (data) "administrator" 187) 179) False 179) (ifBlock (invert (contains (attr (data) "balances" 158) (attr (params 177) "address" 180) 194) 194) ((set (getItem (attr (data) "balances" 158) (attr (params 177) "address" 180) 195) (record 195 (approvals (map 195 )) (balance (literal (intOrNat 0) 195))) 195)) 194) (set (attr (getItem (attr (data) "balances" 158) (attr (params 177) "address" 180) 181) "balance" 181) (add (attr (getItem (attr (data) "balances" 158) (attr (params 177) "address" 180) 181) "balance" 181) (attr (params 177) "value" 181) 181) 181) (set (attr (data) "totalSupply" 191) (add (attr (data) "totalSupply" 191) (attr (params 177) "value" 181) 182) 182))) (permit True ((set_type (params 84) (list (tuple "key" (tuple "signature" "bytes"))) 85) (verify (invert (attr (data) "paused" 157) 87) False 87) (forGroup "permit" (params 84) ((defineLocal "y4" (call_lambda (global "getEffectiveExpiry" -1) (record 97 (in_param (tuple 98 (to_address (implicit_account (hash_key (first (iter "permit" 89) 94) 94) 94) 93) (second (second (iter "permit" 89) 90) 90))) (in_storage (data))) 97) 97) (set (data) (attr (getLocal "y4" 97) "storage" 97) 97) (forGroup "op" (attr (getLocal "y4" 97) "operations" 97) ((set (operations 97) (cons (iter "op" 97) (operations 97) 97) 97)) 97) (verify (invert (and (contains (attr (data) "permits" 62) (tuple 95 (to_address (implicit_account (hash_key (first (iter "permit" 89) 94) 94) 94) 93) (second (second (iter "permit" 89) 90) 90)) 96) (lt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 62) (tuple 95 (to_address (implicit_account (hash_key (first (iter "permit" 89) 94) 94) 94) 93) (second (second (iter "permit" 89) 90) 90)) 99) 100) 100) "Some" "None" 100) (attr (getLocal "y4" 97) "result" 97) 100) 100) 100) False (tuple 101 (literal (string "DUP_PERMIT") -1) (second (second (iter "permit" 89) 90) 90)) 100) (verify (check_signature (first (iter "permit" 89) 102) (first (second (iter "permit" 89) 103) 102) (pack (tuple 91 (tuple 91 (chain_id) (to_address (self) "None")) (tuple 91 (attr (data) "counter" 219) (second (second (iter "permit" 89) 90) 90))) 91) 102) False (tuple 103 (literal (string "MISSIGNED") -1) (pack (tuple 91 (tuple 91 (chain_id) (to_address (self) "None")) (tuple 91 (attr (data) "counter" 219) (second (second (iter "permit" 89) 90) 90))) 91)) 102) (set (getItem (attr (data) "permits" 62) (tuple 104 (to_address (implicit_account (hash_key (first (iter "permit" 89) 94) 94) 94) 93) (second (second (iter "permit" 89) 90) 90)) 104) (now) 104) (set (attr (data) "counter" 219) (add (attr (data) "counter" 219) (literal (intOrNat 1) 105) 105) 105)) 89))) (setAdministrator True ((set_type (params 171) "address" 172) (verify (eq (sender) (attr (data) "administrator" 187) 173) False 173) (set (attr (data) "administrator" 187) (params 171) 174))) (setExpiry True ((set_type (params 122) (record ((address "address") (permit (option "bytes")) (seconds "nat")) None) 123) (verify (invert (attr (data) "paused" 157) 125) False 125) (verify (eq (pack (type_annotation (attr (params 122) "address" 126) (unknown 14) 126) 126) (pack (type_annotation (sender) (unknown 14) 126) 126) 126) "NOT_AUTHORIZED" (literal (bool False) 126) 126) (ifBlock (isVariant (attr (params 122) "permit" 127) "Some" 127) ((verify (contains (attr (data) "permits" 62) (tuple 130 (attr (params 122) "address" 126) (openVariant (attr (params 122) "permit" 127) "Some" "None" 128)) 129) False (literal (string "PERMIT_NONEXISTENT") 129) 129) (ifBlock (and (contains (attr (data) "permit_expiries" 111) (tuple 133 (attr (params 122) "address" 126) (openVariant (attr (params 122) "permit" 127) "Some" "None" 128)) 133) (isVariant (getItem (attr (data) "permit_expiries" 111) (tuple 133 (attr (params 122) "address" 126) (openVariant (attr (params 122) "permit" 127) "Some" "None" 128)) 133) "Some" 133) 133) ((verify (lt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 62) (tuple 131 (attr (params 122) "address" 126) (openVariant (attr (params 122) "permit" 127) "Some" "None" 128)) 131) 136) 136) "Some" "None" 136) (openVariant (getItem (attr (data) "permit_expiries" 111) (tuple 134 (attr (params 122) "address" 126) (openVariant (attr (params 122) "permit" 127) "Some" "None" 128)) 134) "Some" "None" 134) 136) False (literal (string "PERMIT_REVOKED") 136) 136)) 133) (elseBlock ((ifBlock (and (contains (attr (data) "user_expiries" 115) (attr (params 122) "address" 126) 139) (isVariant (getItem (attr (data) "user_expiries" 115) (attr (params 122) "address" 126) 139) "Some" 139) 139) ((verify (lt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 62) (tuple 131 (attr (params 122) "address" 126) (openVariant (attr (params 122) "permit" 127) "Some" "None" 128)) 131) 142) 142) "Some" "None" 142) (openVariant (getItem (attr (data) "user_expiries" 115) (attr (params 122) "address" 126) 140) "Some" "None" 140) 142) False (literal (string "PERMIT_REVOKED") 142) 142)) 139) (elseBlock ((verify (lt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 62) (tuple 131 (attr (params 122) "address" 126) (openVariant (attr (params 122) "permit" 127) "Some" "None" 128)) 131) 145) 145) "Some" "None" 145) (attr (data) "default_expiry" 119) 145) False (literal (string "PERMIT_REVOKED") 145) 145))))) (set (getItem (attr (data) "permit_expiries" 111) (tuple 147 (attr (params 122) "address" 126) (openVariant (attr (params 122) "permit" 127) "Some" "None" 128)) 147) (variant "Some" (attr (params 122) "seconds" 148) 148) 147)) 127) (elseBlock ((set (getItem (attr (data) "user_expiries" 115) (attr (params 122) "address" 126) 151) (variant "Some" (attr (params 122) "seconds" 148) 151) 151))))) (setPause True ((set_type (params 165) "bool" 166) (verify (eq (sender) (attr (data) "administrator" 187) 167) False 167) (set (attr (data) "paused" 157) (params 165) 168))) (transfer True ((set_type (params 13) (record ((from_ "address") (to_ "address") (value "nat")) None) 14) (defineLocal "sender" (sender) 16) (defineLocal "y5" (call_lambda (global "transfer_presigned" -1) (record 17 (in_param (params 13)) (in_storage (data))) 17) 17) (set (data) (attr (getLocal "y5" 17) "storage" 17) 17) (forGroup "op" (attr (getLocal "y5" 17) "operations" 17) ((set (operations 17) (cons (iter "op" 17) (operations 17) 17) 17)) 17) (ifBlock (attr (getLocal "y5" 17) "result" 17) ((set (getLocal "sender" -1) (attr (params 13) "from_" 19) 19)) 17) (verify (or (eq (getLocal "sender" 20) (attr (data) "administrator" 187) 20) (and (invert (attr (data) "paused" 157) 21) (or (eq (attr (params 13) "from_" 19) (getLocal "sender" 22) 22) (ge (getItem (attr (getItem (attr (data) "balances" 158) (attr (params 13) "from_" 19) 23) "approvals" 23) (getLocal "sender" 23) 23) (attr (params 13) "value" 23) 23) 22) 21) 20) False 20) (ifBlock (invert (contains (attr (data) "balances" 158) (attr (params 13) "to_" 24) 194) 194) ((set (getItem (attr (data) "balances" 158) (attr (params 13) "to_" 24) 195) (record 195 (approvals (map 195 )) (balance (literal (intOrNat 0) 195))) 195)) 194) (verify (ge (attr (getItem (attr (data) "balances" 158) (attr (params 13) "from_" 19) 25) "balance" 25) (attr (params 13) "value" 23) 25) False 25) (set (attr (getItem (attr (data) "balances" 158) (attr (params 13) "from_" 19) 26) "balance" 26) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 158) (attr (params 13) "from_" 19) 27) "balance" 27) (attr (params 13) "value" 23) 27) 26) "Some" "None" 26) 26) (set (attr (getItem (attr (data) "balances" 158) (attr (params 13) "to_" 24) 28) "balance" 28) (add (attr (getItem (attr (data) "balances" 158) (attr (params 13) "to_" 24) 28) "balance" 28) (attr (params 13) "value" 23) 28) 28) (ifBlock (and (neq (attr (params 13) "from_" 19) (getLocal "sender" 29) 29) (neq (attr (data) "administrator" 187) (getLocal "sender" 29) 29) 29) ((set (getItem (attr (getItem (attr (data) "balances" 158) (attr (params 13) "from_" 19) 30) "approvals" 30) (getLocal "sender" 30) 30) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) "balances" 158) (attr (params 13) "from_" 19) 31) "approvals" 31) (getLocal "sender" 31) 31) (attr (params 13) "value" 23) 31) 30) "Some" "None" 30) 30)) 29))))
flags ()
globals ((getEffectiveExpiry (lambda 0 "" -1 ((defineLocal "__operations__" (type_annotation (list -1 ) (list "operation") -1) -1) (defineLocal "__storage__" (type_annotation (attr (lambdaParams 0 "" -1 (unknown 2)) "in_storage" -1) (unknown 3) -1) -1) (seq "__s1" ((set_type (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) (tuple "address" "bytes") 109) (ifBlock (and (contains (attr (data) "permit_expiries" 111) (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 111) (isVariant (getItem (attr (data) "permit_expiries" 111) (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 111) "Some" 111) 111) ((result (openVariant (getItem (attr (data) "permit_expiries" 111) (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 112) "Some" "None" 112) 113)) 111) (elseBlock ((ifBlock (and (contains (attr (data) "user_expiries" 115) (first (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 110) 115) (isVariant (getItem (attr (data) "user_expiries" 115) (first (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 110) 115) "Some" 115) 115) ((result (openVariant (getItem (attr (data) "user_expiries" 115) (first (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 110) 116) "Some" "None" 116) 117)) 115) (elseBlock ((result (attr (data) "default_expiry" 119) 119)))))) -1) (bind "__s1" ((result (record -1 (operations (getLocal "__operations__" -1)) (result (getLocal "__s1" -1)) (storage (getLocal "__storage__" -1))) -1)) -1)))) (transfer_presigned (lambda 1 "" -1 ((defineLocal "__operations__" (type_annotation (list -1 ) (list "operation") -1) -1) (defineLocal "__storage__" (type_annotation (attr (lambdaParams 1 "" -1 (unknown 4)) "in_storage" -1) (unknown 5) -1) -1) (seq "__s2" ((set_type (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) (record ((from_ "address") (to_ "address") (value "nat")) None) 56) (defineLocal "effective_expiry" (literal (intOrNat 0) 61) 61) (ifBlock (contains (attr (data) "permits" 62) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 62) ((ifBlock (and (contains (attr (data) "permit_expiries" 111) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 64) (isVariant (getItem (attr (data) "permit_expiries" 111) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 64) "Some" 64) 64) ((set (getLocal "effective_expiry" -1) (openVariant (getItem (attr (data) "permit_expiries" 111) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 65) "Some" "None" 65) 65)) 64) (elseBlock ((ifBlock (and (contains (attr (data) "user_expiries" 115) (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) 67) (isVariant (getItem (attr (data) "user_expiries" 115) (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) 67) "Some" 67) 67) ((set (getLocal "effective_expiry" -1) (openVariant (getItem (attr (data) "user_expiries" 115) (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) 68) "Some" "None" 68) 68)) 67) (elseBlock ((set (getLocal "effective_expiry" -1) (attr (data) "default_expiry" 119) 70))))) (ifBlock (ge (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 62) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 63) 73) 73) "Some" "None" 73) (getLocal "effective_expiry" 73) 73) ((set_type (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) (tuple "address" "bytes") 48) (ifBlock (contains (attr (data) "permits" 62) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 49) ((delItem (attr (data) "permits" 62) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 50)) 49) (ifBlock (contains (attr (data) "permit_expiries" 111) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 51) ((delItem (attr (data) "permit_expiries" 111) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 52)) 51) (result (literal (bool False) 76) 76)) 73) (elseBlock ((set_type (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) (tuple "address" "bytes") 48) (ifBlock (contains (attr (data) "permits" 62) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 49) ((delItem (attr (data) "permits" 62) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 50)) 49) (ifBlock (contains (attr (data) "permit_expiries" 111) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 51) ((delItem (attr (data) "permit_expiries" 111) (tuple 60 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 60) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 58) 58)) 52)) 51) (result (literal (bool True) 79) 79)))) 62) (elseBlock ((result (literal (bool False) 81) 81)))) -1) (bind "__s2" ((result (record -1 (operations (getLocal "__operations__" -1)) (result (getLocal "__s2" -1)) (storage (getLocal "__storage__" -1))) -1)) -1)))))
entry_points_layout ()
balance ())
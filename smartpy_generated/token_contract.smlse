(storage (record 6 (administrator (literal (address "tz1h3rQ8wBxFd8L9B3d7Jhaawu6Z568XU3xY") -1)) (balances (type_annotation (big_map 6 ) (bigmap (unknown 1) (record ((approvals (map "address" "nat")) (balance "nat")) None)) 6)) (counter (literal (intOrNat 0) 6)) (default_expiry (literal (intOrNat 360) 6)) (metadata (big_map 8 ((literal (string "") -1) (literal (bytes "0x74657a6f732d73746f726167653a6d642d6a736f6e") 8)) ((literal (string "md-json") -1) (literal (bytes "0x7b7d") 8)))) (paused (literal (bool False) 6)) (permit_expiries (type_annotation (big_map 8 ) (bigmap (tuple "address" "bytes") (option "nat")) 8)) (permits (type_annotation (big_map 7 ) (bigmap (tuple "address" "bytes") "timestamp") 7)) (totalSupply (literal (intOrNat 0) 6)) (user_expiries (type_annotation (big_map 7 ) (bigmap "address" (option "nat")) 7)))
storage_type (())
messages ((approve True ((set_type (params 105) (record ((spender "address") (value "nat")) (Some (("spender") ("value")))) 106) (verify (invert (attr (data) "paused" 107) 107) False 107) (verify (or (eq (getItemDefault (attr (getItem (attr (data) "balances" 108) (sender) 108) "approvals" 108) (attr (params 105) "spender" 108) (literal (intOrNat 0) 108) 108) (literal (intOrNat 0) 109) 109) (eq (attr (params 105) "value" 109) (literal (intOrNat 0) 109) 109) 109) False (literal (string "UnsafeAllowanceChange") 109) 109) (set (getItem (attr (getItem (attr (data) "balances" 108) (sender) 110) "approvals" 110) (attr (params 105) "spender" 108) 110) (attr (params 105) "value" 109) 110))) (burn True ((set_type (params 133) (record ((address "address") (value "nat")) None) 134) (verify (eq (sender) (attr (data) "administrator" 135) 135) False 135) (verify (ge (attr (getItem (attr (data) "balances" 108) (attr (params 133) "address" 136) 136) "balance" 136) (attr (params 133) "value" 136) 136) False 136) (set (attr (getItem (attr (data) "balances" 108) (attr (params 133) "address" 136) 137) "balance" 137) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 108) (attr (params 133) "address" 136) 137) "balance" 137) (attr (params 133) "value" 136) 137) 137) "Some" "None" 137) 137) (set (attr (data) "totalSupply" 138) (openVariant (isNat (sub (attr (data) "totalSupply" 138) (attr (params 133) "value" 136) 138) 138) "Some" "None" 138) 138))) (getAdministrator True ((set (operations 158) (cons (transfer (attr (data) "administrator" 135) (literal (mutez 0) 158) (openVariant (contract "" "address" (attr (params 157) "target" 158) 158) "Some" "None" 158) 158) (operations 158) 158) 158))) (getAllowance True ((set (operations 150) (cons (transfer (getItem (attr (getItem (attr (data) "balances" 108) (attr (attr (params 149) "arg" 150) "owner" 150) 150) "approvals" 150) (attr (attr (params 149) "arg" 150) "spender" 150) 150) (literal (mutez 0) 150) (openVariant (contract "" "nat" (attr (params 149) "target" 150) 150) "Some" "None" 150) 150) (operations 150) 150) 150))) (getBalance True ((set (operations 146) (cons (transfer (attr (getItem (attr (data) "balances" 108) (attr (attr (params 145) "arg" 146) "owner" 146) 146) "balance" 146) (literal (mutez 0) 146) (openVariant (contract "" "nat" (attr (params 145) "target" 146) 146) "Some" "None" 146) 146) (operations 146) 146) 146))) (getCounter True ((set (operations 162) (cons (transfer (attr (data) "counter" 162) (literal (mutez 0) 162) (openVariant (contract "" "nat" (attr (params 161) "target" 162) 162) "Some" "None" 162) 162) (operations 162) 162) 162))) (getDefaultExpiry True ((set (operations 166) (cons (transfer (attr (data) "default_expiry" 166) (literal (mutez 0) 166) (openVariant (contract "" "nat" (attr (params 165) "target" 166) 166) "Some" "None" 166) 166) (operations 166) 166) 166))) (getTotalSupply True ((set (operations 154) (cons (transfer (attr (data) "totalSupply" 138) (literal (mutez 0) 154) (openVariant (contract "" "nat" (attr (params 153) "target" 154) 154) "Some" "None" 154) 154) (operations 154) 154) 154))) (mint True ((set_type (params 125) (record ((address "address") (value "nat")) None) 126) (verify (eq (sender) (attr (data) "administrator" 135) 127) False 127) (ifBlock (invert (contains (attr (data) "balances" 108) (attr (params 125) "address" 128) 141) 141) ((set (getItem (attr (data) "balances" 108) (attr (params 125) "address" 128) 142) (record 142 (approvals (map 142 )) (balance (literal (intOrNat 0) 142))) 142)) 141) (set (attr (getItem (attr (data) "balances" 108) (attr (params 125) "address" 128) 129) "balance" 129) (add (attr (getItem (attr (data) "balances" 108) (attr (params 125) "address" 128) 129) "balance" 129) (attr (params 125) "value" 129) 129) 129) (set (attr (data) "totalSupply" 138) (add (attr (data) "totalSupply" 138) (attr (params 125) "value" 129) 130) 130))) (permit True ((set_type (params 42) (list (tuple "key" (tuple "signature" "bytes"))) 43) (verify (invert (attr (data) "paused" 107) 44) False 44) (defineLocal "params_hash" (literal (bytes "0x0000") 46) 46) (defineLocal "unsigned" (literal (bytes "0x0000") 47) 47) (defineLocal "pk_address" (to_address (self) "None") 48) (forGroup "permit" (params 42) ((set (getLocal "params_hash" -1) (second (second (iter "permit" 49) 50) 50) 50) (set (getLocal "unsigned" -1) (pack (tuple 51 (tuple 51 (chain_id) (to_address (self) "None")) (tuple 51 (attr (data) "counter" 162) (getLocal "params_hash" 51))) 51) 51) (set (getLocal "pk_address" -1) (to_address (implicit_account (hash_key (first (iter "permit" 49) 52) 52) 52) 52) 52) (verify (invert (contains (attr (data) "permits" 33) (tuple 53 (getLocal "pk_address" 53) (getLocal "params_hash" 53)) 53) 53) False (tuple 53 (literal (string "DUP_PERMIT") -1) (getLocal "params_hash" 53)) 53) (verify (check_signature (first (iter "permit" 49) 54) (first (second (iter "permit" 49) 54) 54) (getLocal "unsigned" 54) 54) False (tuple 54 (literal (string "MISSIGNED") -1) (getLocal "unsigned" 54)) 54) (set (getItem (attr (data) "permits" 33) (tuple 55 (getLocal "pk_address" 55) (getLocal "params_hash" 55)) 55) (now) 55) (set (attr (data) "counter" 162) (add (attr (data) "counter" 162) (literal (intOrNat 1) 56) 56) 56)) 49))) (setAdministrator True ((set_type (params 119) "address" 120) (verify (eq (sender) (attr (data) "administrator" 135) 121) False 121) (set (attr (data) "administrator" 135) (params 119) 122))) (setExpiry True ((set_type (params 81) (record ((address "address") (permit (option "bytes")) (seconds "nat")) None) 82) (verify (eq (pack (type_annotation (attr (params 81) "address" 83) (unknown 8) 83) 83) (pack (type_annotation (sender) (unknown 8) 83) 83) 83) "NOT_AUTHORIZED" (literal (bool False) 83) 83) (ifBlock (isVariant (attr (params 81) "permit" 84) "Some" 84) ((verify (contains (attr (data) "permits" 33) (tuple 86 (attr (params 81) "address" 83) (openVariant (attr (params 81) "permit" 84) "Some" "None" 85)) 86) False (literal (string "PERMIT_NONEXISTENT") 86) 86) (ifBlock (and (contains (attr (data) "permit_expiries" 88) (tuple 88 (attr (params 81) "address" 83) (openVariant (attr (params 81) "permit" 84) "Some" "None" 85)) 88) (isVariant (getItem (attr (data) "permit_expiries" 88) (tuple 88 (attr (params 81) "address" 83) (openVariant (attr (params 81) "permit" 84) "Some" "None" 85)) 88) "Some" 88) 88) ((verify (gt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 33) (tuple 87 (attr (params 81) "address" 83) (openVariant (attr (params 81) "permit" 84) "Some" "None" 85)) 87) 90) 90) "Some" "None" 90) (openVariant (getItem (attr (data) "permit_expiries" 88) (tuple 89 (attr (params 81) "address" 83) (openVariant (attr (params 81) "permit" 84) "Some" "None" 85)) 89) "Some" "None" 89) 90) False (literal (string "PERMIT_REVOKED") 90) 90) (set (getItem (attr (data) "permit_expiries" 88) (tuple 91 (attr (params 81) "address" 83) (openVariant (attr (params 81) "permit" 84) "Some" "None" 85)) 91) (variant "Some" (attr (params 81) "seconds" 91) 91) 91)) 88) (elseBlock ((ifBlock (and (contains (attr (data) "user_expiries" 93) (attr (params 81) "address" 83) 93) (isVariant (getItem (attr (data) "user_expiries" 93) (attr (params 81) "address" 83) 93) "Some" 93) 93) ((verify (gt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 33) (tuple 87 (attr (params 81) "address" 83) (openVariant (attr (params 81) "permit" 84) "Some" "None" 85)) 87) 95) 95) "Some" "None" 95) (openVariant (getItem (attr (data) "user_expiries" 93) (attr (params 81) "address" 83) 94) "Some" "None" 94) 95) False (literal (string "PERMIT_REVOKED") 95) 95) (set (getItem (attr (data) "permit_expiries" 88) (tuple 96 (attr (params 81) "address" 83) (openVariant (attr (params 81) "permit" 84) "Some" "None" 85)) 96) (variant "Some" (attr (params 81) "seconds" 91) 96) 96)) 93) (elseBlock ((verify (gt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 33) (tuple 87 (attr (params 81) "address" 83) (openVariant (attr (params 81) "permit" 84) "Some" "None" 85)) 87) 98) 98) "Some" "None" 98) (attr (data) "default_expiry" 166) 98) False (literal (string "PERMIT_REVOKED") 98) 98) (set (getItem (attr (data) "permit_expiries" 88) (tuple 99 (attr (params 81) "address" 83) (openVariant (attr (params 81) "permit" 84) "Some" "None" 85)) 99) (variant "Some" (attr (params 81) "seconds" 91) 99) 99)))))) 84) (elseBlock ((set (getItem (attr (data) "user_expiries" 93) (attr (params 81) "address" 83) 102) (variant "Some" (attr (params 81) "seconds" 91) 102) 102))))) (setPause True ((set_type (params 113) "bool" 114) (verify (eq (sender) (attr (data) "administrator" 135) 115) False 115) (set (attr (data) "paused" 107) (params 113) 116))) (transfer True ((set_type (params 11) (record ((from_ "address") (to_ "address") (value "nat")) None) 12) (defineLocal "sender" (sender) 13) (defineLocal "y2" (call_lambda (global "transfer_presigned" -1) (record 14 (in_param (params 11)) (in_storage (data))) 14) 14) (set (data) (attr (getLocal "y2" 14) "storage" 14) 14) (forGroup "op" (attr (getLocal "y2" 14) "operations" 14) ((set (operations 14) (cons (iter "op" 14) (operations 14) 14) 14)) 14) (ifBlock (attr (getLocal "y2" 14) "result" 14) ((set (getLocal "sender" -1) (attr (params 11) "from_" 15) 15)) 14) (verify (or (eq (getLocal "sender" 16) (attr (data) "administrator" 135) 16) (and (invert (attr (data) "paused" 107) 17) (or (eq (attr (params 11) "from_" 15) (getLocal "sender" 18) 18) (ge (getItem (attr (getItem (attr (data) "balances" 108) (attr (params 11) "from_" 15) 19) "approvals" 19) (getLocal "sender" 19) 19) (attr (params 11) "value" 19) 19) 18) 17) 16) False 16) (ifBlock (invert (contains (attr (data) "balances" 108) (attr (params 11) "to_" 20) 141) 141) ((set (getItem (attr (data) "balances" 108) (attr (params 11) "to_" 20) 142) (record 142 (approvals (map 142 )) (balance (literal (intOrNat 0) 142))) 142)) 141) (verify (ge (attr (getItem (attr (data) "balances" 108) (attr (params 11) "from_" 15) 21) "balance" 21) (attr (params 11) "value" 19) 21) False 21) (set (attr (getItem (attr (data) "balances" 108) (attr (params 11) "from_" 15) 22) "balance" 22) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 108) (attr (params 11) "from_" 15) 22) "balance" 22) (attr (params 11) "value" 19) 22) 22) "Some" "None" 22) 22) (set (attr (getItem (attr (data) "balances" 108) (attr (params 11) "to_" 20) 23) "balance" 23) (add (attr (getItem (attr (data) "balances" 108) (attr (params 11) "to_" 20) 23) "balance" 23) (attr (params 11) "value" 19) 23) 23) (ifBlock (and (neq (attr (params 11) "from_" 15) (getLocal "sender" 24) 24) (neq (attr (data) "administrator" 135) (getLocal "sender" 24) 24) 24) ((set (getItem (attr (getItem (attr (data) "balances" 108) (attr (params 11) "from_" 15) 25) "approvals" 25) (getLocal "sender" 25) 25) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) "balances" 108) (attr (params 11) "from_" 15) 25) "approvals" 25) (getLocal "sender" 25) 25) (attr (params 11) "value" 19) 25) 25) "Some" "None" 25) 25)) 24))))
flags ()
globals ((transfer_presigned (lambda 0 "" -1 ((defineLocal "__operations__" (type_annotation (list -1 ) (list "operation") -1) -1) (defineLocal "__storage__" (type_annotation (attr (lambdaParams 0 "" -1 (unknown 2)) "in_storage" -1) (unknown 3) -1) -1) (seq "__s1" ((set_type (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) (record ((from_ "address") (to_ "address") (value "nat")) None) 30) (ifBlock (contains (attr (data) "permits" 33) (tuple 33 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 33) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 31) 31)) 33) ((delItem (attr (data) "permits" 33) (tuple 35 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 33) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 31) 31)) 35) (result (literal (bool True) 37) 37)) 33) (elseBlock ((result (literal (bool False) 39) 39)))) -1) (bind "__s1" ((result (record -1 (operations (getLocal "__operations__" -1)) (result (getLocal "__s1" -1)) (storage (getLocal "__storage__" -1))) -1)) -1)))))
entry_points_layout ()
balance ())
(storage (record 6 (administrator (literal (address "tz1h3rQ8wBxFd8L9B3d7Jhaawu6Z568XU3xY") -1)) (balances (type_annotation (big_map 6 ) (bigmap (unknown 1) (record ((approvals (map "address" "nat")) (balance "nat")) None)) 6)) (counter (literal (intOrNat 0) 6)) (default_expiry (literal (intOrNat 360) 6)) (metadata (big_map 9 ((literal (string "") -1) (literal (bytes "0x74657a6f732d73746f726167653a6d642d6a736f6e") 9)) ((literal (string "md-json") -1) (literal (bytes "0x7b7d") 9)))) (paused (literal (bool False) 6)) (permit_expiries (type_annotation (big_map 8 ) (bigmap (tuple "address" "bytes") (option "nat")) 8)) (permits (type_annotation (big_map 7 ) (bigmap (tuple "address" "bytes") "timestamp") 7)) (totalSupply (literal (intOrNat 0) 6)) (user_expiries (type_annotation (big_map 7 ) (bigmap "address" (option "nat")) 7)))
storage_type (())
messages ((approve True ((set_type (params 134) (record ((spender "address") (value "nat")) (Some (("spender") ("value")))) 135) (verify (invert (attr (data) "paused" 136) 136) False 136) (verify (or (eq (getItemDefault (attr (getItem (attr (data) "balances" 137) (sender) 137) "approvals" 137) (attr (params 134) "spender" 137) (literal (intOrNat 0) 137) 137) (literal (intOrNat 0) 138) 138) (eq (attr (params 134) "value" 138) (literal (intOrNat 0) 138) 138) 138) False (literal (string "UnsafeAllowanceChange") 138) 138) (set (getItem (attr (getItem (attr (data) "balances" 137) (sender) 139) "approvals" 139) (attr (params 134) "spender" 137) 139) (attr (params 134) "value" 138) 139))) (burn True ((set_type (params 162) (record ((address "address") (value "nat")) None) 163) (verify (eq (sender) (attr (data) "administrator" 164) 164) False 164) (verify (ge (attr (getItem (attr (data) "balances" 137) (attr (params 162) "address" 165) 165) "balance" 165) (attr (params 162) "value" 165) 165) False 165) (set (attr (getItem (attr (data) "balances" 137) (attr (params 162) "address" 165) 166) "balance" 166) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 137) (attr (params 162) "address" 165) 166) "balance" 166) (attr (params 162) "value" 165) 166) 166) "Some" "None" 166) 166) (set (attr (data) "totalSupply" 167) (openVariant (isNat (sub (attr (data) "totalSupply" 167) (attr (params 162) "value" 165) 167) 167) "Some" "None" 167) 167))) (delete_permits True ((set_type (params 30) (list (tuple "address" "bytes")) 31) (defineLocal "effective_expiry" (literal (intOrNat 0) 32) 32) (forGroup "permit_key" (params 30) ((verify (contains (attr (data) "permits" 56) (iter "permit_key" 33) 34) False (tuple 35 (literal (string "NO_PERMIT_TO_DELETE") -1) (iter "permit_key" 33)) 35) (defineLocal "y3" (call_lambda (global "getEffectiveExpiry" -1) (record 36 (in_param (iter "permit_key" 33)) (in_storage (data))) 36) 36) (set (data) (attr (getLocal "y3" 36) "storage" 36) 36) (forGroup "op" (attr (getLocal "y3" 36) "operations" 36) ((set (operations 36) (cons (iter "op" 36) (operations 36) 36) 36)) 36) (verify (ge (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 56) (iter "permit_key" 33) 37) 38) 38) "Some" "None" 38) (attr (getLocal "y3" 36) "result" 36) 38) False (tuple 39 (literal (string "PERMIT_NOT_EXPIRED") -1) (iter "permit_key" 33)) 38) (set_type (iter "permit_key" 33) (tuple "address" "bytes") 43) (ifBlock (contains (attr (data) "permits" 56) (iter "permit_key" 33) 44) ((delItem (attr (data) "permits" 56) (iter "permit_key" 33) 45)) 44) (ifBlock (contains (attr (data) "permit_expiries" 100) (iter "permit_key" 33) 46) ((delItem (attr (data) "permit_expiries" 100) (iter "permit_key" 33) 47)) 46)) 33))) (getAdministrator True ((set (operations 187) (cons (transfer (attr (data) "administrator" 164) (literal (mutez 0) 187) (openVariant (contract "" "address" (attr (params 186) "target" 187) 187) "Some" "None" 187) 187) (operations 187) 187) 187))) (getAllowance True ((set (operations 179) (cons (transfer (getItem (attr (getItem (attr (data) "balances" 137) (attr (attr (params 178) "arg" 179) "owner" 179) 179) "approvals" 179) (attr (attr (params 178) "arg" 179) "spender" 179) 179) (literal (mutez 0) 179) (openVariant (contract "" "nat" (attr (params 178) "target" 179) 179) "Some" "None" 179) 179) (operations 179) 179) 179))) (getBalance True ((set (operations 175) (cons (transfer (attr (getItem (attr (data) "balances" 137) (attr (attr (params 174) "arg" 175) "owner" 175) 175) "balance" 175) (literal (mutez 0) 175) (openVariant (contract "" "nat" (attr (params 174) "target" 175) 175) "Some" "None" 175) 175) (operations 175) 175) 175))) (getCounter True ((set (operations 191) (cons (transfer (attr (data) "counter" 191) (literal (mutez 0) 191) (openVariant (contract "" "nat" (attr (params 190) "target" 191) 191) "Some" "None" 191) 191) (operations 191) 191) 191))) (getDefaultExpiry True ((set (operations 195) (cons (transfer (attr (data) "default_expiry" 108) (literal (mutez 0) 195) (openVariant (contract "" "nat" (attr (params 194) "target" 195) 195) "Some" "None" 195) 195) (operations 195) 195) 195))) (getTotalSupply True ((set (operations 183) (cons (transfer (attr (data) "totalSupply" 167) (literal (mutez 0) 183) (openVariant (contract "" "nat" (attr (params 182) "target" 183) 183) "Some" "None" 183) 183) (operations 183) 183) 183))) (mint True ((set_type (params 154) (record ((address "address") (value "nat")) None) 155) (verify (eq (sender) (attr (data) "administrator" 164) 156) False 156) (ifBlock (invert (contains (attr (data) "balances" 137) (attr (params 154) "address" 157) 170) 170) ((set (getItem (attr (data) "balances" 137) (attr (params 154) "address" 157) 171) (record 171 (approvals (map 171 )) (balance (literal (intOrNat 0) 171))) 171)) 170) (set (attr (getItem (attr (data) "balances" 137) (attr (params 154) "address" 157) 158) "balance" 158) (add (attr (getItem (attr (data) "balances" 137) (attr (params 154) "address" 157) 158) "balance" 158) (attr (params 154) "value" 158) 158) 158) (set (attr (data) "totalSupply" 167) (add (attr (data) "totalSupply" 167) (attr (params 154) "value" 158) 159) 159))) (permit True ((set_type (params 78) (list (tuple "key" (tuple "signature" "bytes"))) 79) (verify (invert (attr (data) "paused" 136) 80) False 80) (forGroup "permit" (params 78) ((defineLocal "y4" (call_lambda (global "getEffectiveExpiry" -1) (record 88 (in_param (tuple 88 (to_address (implicit_account (hash_key (first (iter "permit" 82) 85) 85) 85) 85) (second (second (iter "permit" 82) 83) 83))) (in_storage (data))) 88) 88) (set (data) (attr (getLocal "y4" 88) "storage" 88) 88) (forGroup "op" (attr (getLocal "y4" 88) "operations" 88) ((set (operations 88) (cons (iter "op" 88) (operations 88) 88) 88)) 88) (verify (invert (and (contains (attr (data) "permits" 56) (tuple 86 (to_address (implicit_account (hash_key (first (iter "permit" 82) 85) 85) 85) 85) (second (second (iter "permit" 82) 83) 83)) 87) (lt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 56) (tuple 86 (to_address (implicit_account (hash_key (first (iter "permit" 82) 85) 85) 85) 85) (second (second (iter "permit" 82) 83) 83)) 89) 90) 90) "Some" "None" 90) (attr (getLocal "y4" 88) "result" 88) 90) 90) 90) False (tuple 91 (literal (string "DUP_PERMIT") -1) (second (second (iter "permit" 82) 83) 83)) 90) (verify (check_signature (first (iter "permit" 82) 92) (first (second (iter "permit" 82) 92) 92) (pack (tuple 84 (tuple 84 (chain_id) (to_address (self) "None")) (tuple 84 (attr (data) "counter" 191) (second (second (iter "permit" 82) 83) 83))) 84) 92) False (tuple 92 (literal (string "MISSIGNED") -1) (pack (tuple 84 (tuple 84 (chain_id) (to_address (self) "None")) (tuple 84 (attr (data) "counter" 191) (second (second (iter "permit" 82) 83) 83))) 84)) 92) (set (getItem (attr (data) "permits" 56) (tuple 93 (to_address (implicit_account (hash_key (first (iter "permit" 82) 85) 85) 85) 85) (second (second (iter "permit" 82) 83) 83)) 93) (now) 93) (set (attr (data) "counter" 191) (add (attr (data) "counter" 191) (literal (intOrNat 1) 94) 94) 94)) 82))) (setAdministrator True ((set_type (params 148) "address" 149) (verify (eq (sender) (attr (data) "administrator" 164) 150) False 150) (set (attr (data) "administrator" 164) (params 148) 151))) (setExpiry True ((set_type (params 111) (record ((address "address") (permit (option "bytes")) (seconds "nat")) None) 112) (verify (invert (attr (data) "paused" 136) 113) False 113) (verify (eq (pack (type_annotation (attr (params 111) "address" 114) (unknown 14) 114) 114) (pack (type_annotation (sender) (unknown 14) 114) 114) 114) "NOT_AUTHORIZED" (literal (bool False) 114) 114) (ifBlock (isVariant (attr (params 111) "permit" 115) "Some" 115) ((verify (contains (attr (data) "permits" 56) (tuple 117 (attr (params 111) "address" 114) (openVariant (attr (params 111) "permit" 115) "Some" "None" 116)) 117) False (literal (string "PERMIT_NONEXISTENT") 117) 117) (ifBlock (and (contains (attr (data) "permit_expiries" 100) (tuple 119 (attr (params 111) "address" 114) (openVariant (attr (params 111) "permit" 115) "Some" "None" 116)) 119) (isVariant (getItem (attr (data) "permit_expiries" 100) (tuple 119 (attr (params 111) "address" 114) (openVariant (attr (params 111) "permit" 115) "Some" "None" 116)) 119) "Some" 119) 119) ((verify (lt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 56) (tuple 118 (attr (params 111) "address" 114) (openVariant (attr (params 111) "permit" 115) "Some" "None" 116)) 118) 121) 121) "Some" "None" 121) (openVariant (getItem (attr (data) "permit_expiries" 100) (tuple 120 (attr (params 111) "address" 114) (openVariant (attr (params 111) "permit" 115) "Some" "None" 116)) 120) "Some" "None" 120) 121) False (literal (string "PERMIT_REVOKED") 121) 121)) 119) (elseBlock ((ifBlock (and (contains (attr (data) "user_expiries" 104) (attr (params 111) "address" 114) 123) (isVariant (getItem (attr (data) "user_expiries" 104) (attr (params 111) "address" 114) 123) "Some" 123) 123) ((verify (lt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 56) (tuple 118 (attr (params 111) "address" 114) (openVariant (attr (params 111) "permit" 115) "Some" "None" 116)) 118) 125) 125) "Some" "None" 125) (openVariant (getItem (attr (data) "user_expiries" 104) (attr (params 111) "address" 114) 124) "Some" "None" 124) 125) False (literal (string "PERMIT_REVOKED") 125) 125)) 123) (elseBlock ((verify (lt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 56) (tuple 118 (attr (params 111) "address" 114) (openVariant (attr (params 111) "permit" 115) "Some" "None" 116)) 118) 127) 127) "Some" "None" 127) (attr (data) "default_expiry" 108) 127) False (literal (string "PERMIT_REVOKED") 127) 127))))) (set (getItem (attr (data) "permit_expiries" 100) (tuple 128 (attr (params 111) "address" 114) (openVariant (attr (params 111) "permit" 115) "Some" "None" 116)) 128) (variant "Some" (attr (params 111) "seconds" 128) 128) 128)) 115) (elseBlock ((set (getItem (attr (data) "user_expiries" 104) (attr (params 111) "address" 114) 131) (variant "Some" (attr (params 111) "seconds" 128) 131) 131))))) (setPause True ((set_type (params 142) "bool" 143) (verify (eq (sender) (attr (data) "administrator" 164) 144) False 144) (set (attr (data) "paused" 136) (params 142) 145))) (transfer True ((set_type (params 12) (record ((from_ "address") (to_ "address") (value "nat")) None) 13) (defineLocal "sender" (sender) 14) (defineLocal "y5" (call_lambda (global "transfer_presigned" -1) (record 15 (in_param (params 12)) (in_storage (data))) 15) 15) (set (data) (attr (getLocal "y5" 15) "storage" 15) 15) (forGroup "op" (attr (getLocal "y5" 15) "operations" 15) ((set (operations 15) (cons (iter "op" 15) (operations 15) 15) 15)) 15) (ifBlock (attr (getLocal "y5" 15) "result" 15) ((set (getLocal "sender" -1) (attr (params 12) "from_" 17) 17)) 15) (verify (or (eq (getLocal "sender" 18) (attr (data) "administrator" 164) 18) (and (invert (attr (data) "paused" 136) 19) (or (eq (attr (params 12) "from_" 17) (getLocal "sender" 20) 20) (ge (getItem (attr (getItem (attr (data) "balances" 137) (attr (params 12) "from_" 17) 21) "approvals" 21) (getLocal "sender" 21) 21) (attr (params 12) "value" 21) 21) 20) 19) 18) False 18) (ifBlock (invert (contains (attr (data) "balances" 137) (attr (params 12) "to_" 22) 170) 170) ((set (getItem (attr (data) "balances" 137) (attr (params 12) "to_" 22) 171) (record 171 (approvals (map 171 )) (balance (literal (intOrNat 0) 171))) 171)) 170) (verify (ge (attr (getItem (attr (data) "balances" 137) (attr (params 12) "from_" 17) 23) "balance" 23) (attr (params 12) "value" 21) 23) False 23) (set (attr (getItem (attr (data) "balances" 137) (attr (params 12) "from_" 17) 24) "balance" 24) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 137) (attr (params 12) "from_" 17) 24) "balance" 24) (attr (params 12) "value" 21) 24) 24) "Some" "None" 24) 24) (set (attr (getItem (attr (data) "balances" 137) (attr (params 12) "to_" 22) 25) "balance" 25) (add (attr (getItem (attr (data) "balances" 137) (attr (params 12) "to_" 22) 25) "balance" 25) (attr (params 12) "value" 21) 25) 25) (ifBlock (and (neq (attr (params 12) "from_" 17) (getLocal "sender" 26) 26) (neq (attr (data) "administrator" 164) (getLocal "sender" 26) 26) 26) ((set (getItem (attr (getItem (attr (data) "balances" 137) (attr (params 12) "from_" 17) 27) "approvals" 27) (getLocal "sender" 27) 27) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) "balances" 137) (attr (params 12) "from_" 17) 27) "approvals" 27) (getLocal "sender" 27) 27) (attr (params 12) "value" 21) 27) 27) "Some" "None" 27) 27)) 26))))
flags ()
globals ((getEffectiveExpiry (lambda 0 "" -1 ((defineLocal "__operations__" (type_annotation (list -1 ) (list "operation") -1) -1) (defineLocal "__storage__" (type_annotation (attr (lambdaParams 0 "" -1 (unknown 2)) "in_storage" -1) (unknown 3) -1) -1) (seq "__s1" ((set_type (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) (tuple "address" "bytes") 98) (ifBlock (and (contains (attr (data) "permit_expiries" 100) (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 100) (isVariant (getItem (attr (data) "permit_expiries" 100) (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 100) "Some" 100) 100) ((result (openVariant (getItem (attr (data) "permit_expiries" 100) (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 101) "Some" "None" 101) 102)) 100) (elseBlock ((ifBlock (and (contains (attr (data) "user_expiries" 104) (first (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 99) 104) (isVariant (getItem (attr (data) "user_expiries" 104) (first (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 99) 104) "Some" 104) 104) ((result (openVariant (getItem (attr (data) "user_expiries" 104) (first (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 99) 105) "Some" "None" 105) 106)) 104) (elseBlock ((result (attr (data) "default_expiry" 108) 108)))))) -1) (bind "__s1" ((result (record -1 (operations (getLocal "__operations__" -1)) (result (getLocal "__s1" -1)) (storage (getLocal "__storage__" -1))) -1)) -1)))) (transfer_presigned (lambda 1 "" -1 ((defineLocal "__operations__" (type_annotation (list -1 ) (list "operation") -1) -1) (defineLocal "__storage__" (type_annotation (attr (lambdaParams 1 "" -1 (unknown 4)) "in_storage" -1) (unknown 5) -1) -1) (seq "__s2" ((set_type (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) (record ((from_ "address") (to_ "address") (value "nat")) None) 51) (defineLocal "effective_expiry" (literal (intOrNat 0) 55) 55) (ifBlock (contains (attr (data) "permits" 56) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 56) ((ifBlock (and (contains (attr (data) "permit_expiries" 100) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 58) (isVariant (getItem (attr (data) "permit_expiries" 100) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 58) "Some" 58) 58) ((set (getLocal "effective_expiry" -1) (openVariant (getItem (attr (data) "permit_expiries" 100) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 59) "Some" "None" 59) 59)) 58) (elseBlock ((ifBlock (and (contains (attr (data) "user_expiries" 104) (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) 61) (isVariant (getItem (attr (data) "user_expiries" 104) (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) 61) "Some" 61) 61) ((set (getLocal "effective_expiry" -1) (openVariant (getItem (attr (data) "user_expiries" 104) (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) 62) "Some" "None" 62) 62)) 61) (elseBlock ((set (getLocal "effective_expiry" -1) (attr (data) "default_expiry" 108) 64))))) (ifBlock (ge (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 56) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 57) 67) 67) "Some" "None" 67) (getLocal "effective_expiry" 67) 67) ((set_type (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) (tuple "address" "bytes") 43) (ifBlock (contains (attr (data) "permits" 56) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 44) ((delItem (attr (data) "permits" 56) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 45)) 44) (ifBlock (contains (attr (data) "permit_expiries" 100) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 46) ((delItem (attr (data) "permit_expiries" 100) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 47)) 46) (result (literal (bool False) 70) 70)) 67) (elseBlock ((set_type (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) (tuple "address" "bytes") 43) (ifBlock (contains (attr (data) "permits" 56) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 44) ((delItem (attr (data) "permits" 56) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 45)) 44) (ifBlock (contains (attr (data) "permit_expiries" 100) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 46) ((delItem (attr (data) "permit_expiries" 100) (tuple 54 (attr (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) "from_" 54) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 1 "" -1 (unknown 4)) "in_param" -1) 52) 52)) 47)) 46) (result (literal (bool True) 73) 73)))) 56) (elseBlock ((result (literal (bool False) 75) 75)))) -1) (bind "__s2" ((result (record -1 (operations (getLocal "__operations__" -1)) (result (getLocal "__s2" -1)) (storage (getLocal "__storage__" -1))) -1)) -1)))))
entry_points_layout ()
balance ())
(storage (record 6 (administrator (literal (address "tz1h3rQ8wBxFd8L9B3d7Jhaawu6Z568XU3xY") -1)) (balances (type_annotation (big_map 6 ) (bigmap (unknown 1) (record ((approvals (map "address" "nat")) (balance "nat")) None)) 6)) (counter (literal (intOrNat 0) 6)) (default_expiry (literal (intOrNat 360) 6)) (metadata (big_map 9 ((literal (string "") -1) (literal (bytes "0x74657a6f732d73746f726167653a6d642d6a736f6e") 9)) ((literal (string "md-json") -1) (literal (bytes "0x7b7d") 9)))) (paused (literal (bool False) 6)) (permit_expiries (type_annotation (big_map 8 ) (bigmap (tuple "address" "bytes") (option "nat")) 8)) (permits (type_annotation (big_map 7 ) (bigmap (tuple "address" "bytes") "timestamp") 7)) (totalSupply (literal (intOrNat 0) 6)) (user_expiries (type_annotation (big_map 7 ) (bigmap "address" (option "nat")) 7)))
storage_type (())
messages ((approve True ((set_type (params 116) (record ((spender "address") (value "nat")) (Some (("spender") ("value")))) 117) (verify (invert (attr (data) "paused" 118) 118) False 118) (verify (or (eq (getItemDefault (attr (getItem (attr (data) "balances" 119) (sender) 119) "approvals" 119) (attr (params 116) "spender" 119) (literal (intOrNat 0) 119) 119) (literal (intOrNat 0) 120) 120) (eq (attr (params 116) "value" 120) (literal (intOrNat 0) 120) 120) 120) False (literal (string "UnsafeAllowanceChange") 120) 120) (set (getItem (attr (getItem (attr (data) "balances" 119) (sender) 121) "approvals" 121) (attr (params 116) "spender" 119) 121) (attr (params 116) "value" 120) 121))) (burn True ((set_type (params 144) (record ((address "address") (value "nat")) None) 145) (verify (eq (sender) (attr (data) "administrator" 146) 146) False 146) (verify (ge (attr (getItem (attr (data) "balances" 119) (attr (params 144) "address" 147) 147) "balance" 147) (attr (params 144) "value" 147) 147) False 147) (set (attr (getItem (attr (data) "balances" 119) (attr (params 144) "address" 147) 148) "balance" 148) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 119) (attr (params 144) "address" 147) 148) "balance" 148) (attr (params 144) "value" 147) 148) 148) "Some" "None" 148) 148) (set (attr (data) "totalSupply" 149) (openVariant (isNat (sub (attr (data) "totalSupply" 149) (attr (params 144) "value" 147) 149) 149) "Some" "None" 149) 149))) (getAdministrator True ((set (operations 169) (cons (transfer (attr (data) "administrator" 146) (literal (mutez 0) 169) (openVariant (contract "" "address" (attr (params 168) "target" 169) 169) "Some" "None" 169) 169) (operations 169) 169) 169))) (getAllowance True ((set (operations 161) (cons (transfer (getItem (attr (getItem (attr (data) "balances" 119) (attr (attr (params 160) "arg" 161) "owner" 161) 161) "approvals" 161) (attr (attr (params 160) "arg" 161) "spender" 161) 161) (literal (mutez 0) 161) (openVariant (contract "" "nat" (attr (params 160) "target" 161) 161) "Some" "None" 161) 161) (operations 161) 161) 161))) (getBalance True ((set (operations 157) (cons (transfer (attr (getItem (attr (data) "balances" 119) (attr (attr (params 156) "arg" 157) "owner" 157) 157) "balance" 157) (literal (mutez 0) 157) (openVariant (contract "" "nat" (attr (params 156) "target" 157) 157) "Some" "None" 157) 157) (operations 157) 157) 157))) (getCounter True ((set (operations 173) (cons (transfer (attr (data) "counter" 173) (literal (mutez 0) 173) (openVariant (contract "" "nat" (attr (params 172) "target" 173) 173) "Some" "None" 173) 173) (operations 173) 173) 173))) (getDefaultExpiry True ((set (operations 177) (cons (transfer (attr (data) "default_expiry" 60) (literal (mutez 0) 177) (openVariant (contract "" "nat" (attr (params 176) "target" 177) 177) "Some" "None" 177) 177) (operations 177) 177) 177))) (getTotalSupply True ((set (operations 165) (cons (transfer (attr (data) "totalSupply" 149) (literal (mutez 0) 165) (openVariant (contract "" "nat" (attr (params 164) "target" 165) 165) "Some" "None" 165) 165) (operations 165) 165) 165))) (mint True ((set_type (params 136) (record ((address "address") (value "nat")) None) 137) (verify (eq (sender) (attr (data) "administrator" 146) 138) False 138) (ifBlock (invert (contains (attr (data) "balances" 119) (attr (params 136) "address" 139) 152) 152) ((set (getItem (attr (data) "balances" 119) (attr (params 136) "address" 139) 153) (record 153 (approvals (map 153 )) (balance (literal (intOrNat 0) 153))) 153)) 152) (set (attr (getItem (attr (data) "balances" 119) (attr (params 136) "address" 139) 140) "balance" 140) (add (attr (getItem (attr (data) "balances" 119) (attr (params 136) "address" 139) 140) "balance" 140) (attr (params 136) "value" 140) 140) 140) (set (attr (data) "totalSupply" 149) (add (attr (data) "totalSupply" 149) (attr (params 136) "value" 140) 141) 141))) (permit True ((set_type (params 74) (list (tuple "key" (tuple "signature" "bytes"))) 75) (verify (invert (attr (data) "paused" 118) 76) False 76) (defineLocal "params_hash" (literal (bytes "0x0000") 78) 78) (defineLocal "unsigned" (literal (bytes "0x0000") 79) 79) (defineLocal "pk_address" (to_address (self) "None") 80) (forGroup "permit" (params 74) ((set (getLocal "params_hash" -1) (second (second (iter "permit" 81) 82) 82) 82) (set (getLocal "unsigned" -1) (pack (tuple 83 (tuple 83 (chain_id) (to_address (self) "None")) (tuple 83 (attr (data) "counter" 173) (getLocal "params_hash" 83))) 83) 83) (set (getLocal "pk_address" -1) (to_address (implicit_account (hash_key (first (iter "permit" 81) 84) 84) 84) 84) 84) (verify (invert (contains (attr (data) "permits" 51) (tuple 85 (getLocal "pk_address" 85) (getLocal "params_hash" 85)) 85) 85) False (tuple 85 (literal (string "DUP_PERMIT") -1) (getLocal "params_hash" 85)) 85) (verify (check_signature (first (iter "permit" 81) 86) (first (second (iter "permit" 81) 86) 86) (getLocal "unsigned" 86) 86) False (tuple 86 (literal (string "MISSIGNED") -1) (getLocal "unsigned" 86)) 86) (set (getItem (attr (data) "permits" 51) (tuple 87 (getLocal "pk_address" 87) (getLocal "params_hash" 87)) 87) (now) 87) (set (attr (data) "counter" 173) (add (attr (data) "counter" 173) (literal (intOrNat 1) 88) 88) 88)) 81))) (setAdministrator True ((set_type (params 130) "address" 131) (verify (eq (sender) (attr (data) "administrator" 146) 132) False 132) (set (attr (data) "administrator" 146) (params 130) 133))) (setExpiry True ((set_type (params 91) (record ((address "address") (permit (option "bytes")) (seconds "nat")) None) 92) (verify (invert (attr (data) "paused" 118) 93) False 93) (verify (eq (pack (type_annotation (attr (params 91) "address" 94) (unknown 9) 94) 94) (pack (type_annotation (sender) (unknown 9) 94) 94) 94) "NOT_AUTHORIZED" (literal (bool False) 94) 94) (ifBlock (isVariant (attr (params 91) "permit" 95) "Some" 95) ((verify (contains (attr (data) "permits" 51) (tuple 97 (attr (params 91) "address" 94) (openVariant (attr (params 91) "permit" 95) "Some" "None" 96)) 97) False (literal (string "PERMIT_NONEXISTENT") 97) 97) (ifBlock (and (contains (attr (data) "permit_expiries" 54) (tuple 99 (attr (params 91) "address" 94) (openVariant (attr (params 91) "permit" 95) "Some" "None" 96)) 99) (isVariant (getItem (attr (data) "permit_expiries" 54) (tuple 99 (attr (params 91) "address" 94) (openVariant (attr (params 91) "permit" 95) "Some" "None" 96)) 99) "Some" 99) 99) ((verify (lt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 51) (tuple 98 (attr (params 91) "address" 94) (openVariant (attr (params 91) "permit" 95) "Some" "None" 96)) 98) 101) 101) "Some" "None" 101) (openVariant (getItem (attr (data) "permit_expiries" 54) (tuple 100 (attr (params 91) "address" 94) (openVariant (attr (params 91) "permit" 95) "Some" "None" 96)) 100) "Some" "None" 100) 101) False (literal (string "PERMIT_REVOKED") 101) 101) (set (getItem (attr (data) "permit_expiries" 54) (tuple 102 (attr (params 91) "address" 94) (openVariant (attr (params 91) "permit" 95) "Some" "None" 96)) 102) (variant "Some" (attr (params 91) "seconds" 102) 102) 102)) 99) (elseBlock ((ifBlock (and (contains (attr (data) "user_expiries" 57) (attr (params 91) "address" 94) 104) (isVariant (getItem (attr (data) "user_expiries" 57) (attr (params 91) "address" 94) 104) "Some" 104) 104) ((verify (lt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 51) (tuple 98 (attr (params 91) "address" 94) (openVariant (attr (params 91) "permit" 95) "Some" "None" 96)) 98) 106) 106) "Some" "None" 106) (openVariant (getItem (attr (data) "user_expiries" 57) (attr (params 91) "address" 94) 105) "Some" "None" 105) 106) False (literal (string "PERMIT_REVOKED") 106) 106) (set (getItem (attr (data) "permit_expiries" 54) (tuple 107 (attr (params 91) "address" 94) (openVariant (attr (params 91) "permit" 95) "Some" "None" 96)) 107) (variant "Some" (attr (params 91) "seconds" 102) 107) 107)) 104) (elseBlock ((verify (lt (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 51) (tuple 98 (attr (params 91) "address" 94) (openVariant (attr (params 91) "permit" 95) "Some" "None" 96)) 98) 109) 109) "Some" "None" 109) (attr (data) "default_expiry" 60) 109) False (literal (string "PERMIT_REVOKED") 109) 109) (set (getItem (attr (data) "permit_expiries" 54) (tuple 110 (attr (params 91) "address" 94) (openVariant (attr (params 91) "permit" 95) "Some" "None" 96)) 110) (variant "Some" (attr (params 91) "seconds" 102) 110) 110)))))) 95) (elseBlock ((set (getItem (attr (data) "user_expiries" 57) (attr (params 91) "address" 94) 113) (variant "Some" (attr (params 91) "seconds" 102) 113) 113))))) (setPause True ((set_type (params 124) "bool" 125) (verify (eq (sender) (attr (data) "administrator" 146) 126) False 126) (set (attr (data) "paused" 118) (params 124) 127))) (transfer True ((set_type (params 12) (record ((from_ "address") (to_ "address") (value "nat")) None) 13) (defineLocal "sender" (sender) 14) (defineLocal "y2" (call_lambda (global "transfer_presigned" -1) (record 15 (in_param (params 12)) (in_storage (data))) 15) 15) (set (data) (attr (getLocal "y2" 15) "storage" 15) 15) (forGroup "op" (attr (getLocal "y2" 15) "operations" 15) ((set (operations 15) (cons (iter "op" 15) (operations 15) 15) 15)) 15) (ifBlock (attr (getLocal "y2" 15) "result" 15) ((set (getLocal "sender" -1) (attr (params 12) "from_" 17) 17)) 15) (verify (or (eq (getLocal "sender" 18) (attr (data) "administrator" 146) 18) (and (invert (attr (data) "paused" 118) 19) (or (eq (attr (params 12) "from_" 17) (getLocal "sender" 20) 20) (ge (getItem (attr (getItem (attr (data) "balances" 119) (attr (params 12) "from_" 17) 21) "approvals" 21) (getLocal "sender" 21) 21) (attr (params 12) "value" 21) 21) 20) 19) 18) False 18) (ifBlock (invert (contains (attr (data) "balances" 119) (attr (params 12) "to_" 22) 152) 152) ((set (getItem (attr (data) "balances" 119) (attr (params 12) "to_" 22) 153) (record 153 (approvals (map 153 )) (balance (literal (intOrNat 0) 153))) 153)) 152) (verify (ge (attr (getItem (attr (data) "balances" 119) (attr (params 12) "from_" 17) 23) "balance" 23) (attr (params 12) "value" 21) 23) False 23) (set (attr (getItem (attr (data) "balances" 119) (attr (params 12) "from_" 17) 24) "balance" 24) (openVariant (isNat (sub (attr (getItem (attr (data) "balances" 119) (attr (params 12) "from_" 17) 24) "balance" 24) (attr (params 12) "value" 21) 24) 24) "Some" "None" 24) 24) (set (attr (getItem (attr (data) "balances" 119) (attr (params 12) "to_" 22) 25) "balance" 25) (add (attr (getItem (attr (data) "balances" 119) (attr (params 12) "to_" 22) 25) "balance" 25) (attr (params 12) "value" 21) 25) 25) (ifBlock (and (neq (attr (params 12) "from_" 17) (getLocal "sender" 26) 26) (neq (attr (data) "administrator" 146) (getLocal "sender" 26) 26) 26) ((set (getItem (attr (getItem (attr (data) "balances" 119) (attr (params 12) "from_" 17) 27) "approvals" 27) (getLocal "sender" 27) 27) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) "balances" 119) (attr (params 12) "from_" 17) 27) "approvals" 27) (getLocal "sender" 27) 27) (attr (params 12) "value" 21) 27) 27) "Some" "None" 27) 27)) 26))))
flags ()
globals ((transfer_presigned (lambda 0 "" -1 ((defineLocal "__operations__" (type_annotation (list -1 ) (list "operation") -1) -1) (defineLocal "__storage__" (type_annotation (attr (lambdaParams 0 "" -1 (unknown 2)) "in_storage" -1) (unknown 3) -1) -1) (seq "__s1" ((set_type (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) (record ((from_ "address") (to_ "address") (value "nat")) None) 47) (ifBlock (contains (attr (data) "permits" 51) (tuple 50 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 51) ((defineLocal "effective_expiry" (literal (intOrNat 0) 53) 53) (ifBlock (and (contains (attr (data) "permit_expiries" 54) (tuple 50 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 54) (isVariant (getItem (attr (data) "permit_expiries" 54) (tuple 50 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 54) "Some" 54) 54) ((set (getLocal "effective_expiry" -1) (openVariant (getItem (attr (data) "permit_expiries" 54) (tuple 50 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 55) "Some" "None" 55) 55)) 54) (elseBlock ((ifBlock (and (contains (attr (data) "user_expiries" 57) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) 57) (isVariant (getItem (attr (data) "user_expiries" 57) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) 57) "Some" 57) 57) ((set (getLocal "effective_expiry" -1) (openVariant (getItem (attr (data) "user_expiries" 57) (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) 58) "Some" "None" 58) 58)) 57) (elseBlock ((set (getLocal "effective_expiry" -1) (attr (data) "default_expiry" 60) 60))))) (ifBlock (ge (openVariant (isNat (sub (now) (getItem (attr (data) "permits" 51) (tuple 50 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 52) 63) 63) "Some" "None" 63) (getLocal "effective_expiry" 63) 63) ((delItem (attr (data) "permits" 51) (tuple 65 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 65) (result (literal (bool False) 66) 66)) 63) (elseBlock ((delItem (attr (data) "permits" 51) (tuple 68 (attr (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) "from_" 50) (hashCrypto "BLAKE2B" (pack (attr (lambdaParams 0 "" -1 (unknown 2)) "in_param" -1) 48) 48)) 68) (result (literal (bool True) 69) 69)))) 51) (elseBlock ((result (literal (bool False) 71) 71)))) -1) (bind "__s1" ((result (record -1 (operations (getLocal "__operations__" -1)) (result (getLocal "__s1" -1)) (storage (getLocal "__storage__" -1))) -1)) -1)))))
entry_points_layout ()
balance ())